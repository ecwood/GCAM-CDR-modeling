# How to Use GCAM to Implement DAC Deployment

## Setup
Instance Requirements:
 - `r5a.4xlarge` (for full capabilities) with `45GB` of disk space
 - `m5a.2xlarge` (for build capabilities only)

1. Turn on instance and `ssh` into instance.

2. ```git clone https://github.com/ecwood/GCAM-CDR-modeling.git```

3. ```cd GCAM-CDR-modeling```

4. ```screen -S setup_gcam```

5. ```./setup_gcam.sh > ~/setup_gcam.log 2>&1```

6. Ctrl-A, Ctrl-D

## Introduction to GCAM

### File Structure
Annotation Key:
 - ðŸŸ§: Base directory explanation
 - ðŸŸ©: File explanation
 - ðŸŸ¦: Core directory explanation
 - ðŸŸª: Niche directory explanation

```
.
â”œâ”€â”€ CONTRIBUTING.md
â”œâ”€â”€ cvs
â”‚    â””â”€â”€ objects ðŸŸ§ This is the folder that contains all of the C++ source code that makes up the model. ðŸŸ§
â”‚        â”‚       ðŸŸ§ (This is the code that the model solves with.) ðŸŸ§
â”‚        â”œâ”€â”€ build
â”‚        â”œâ”€â”€ ccarbon_model
â”‚        â”œâ”€â”€ climate ðŸŸª This is where the Hector related files are located. Hector is a separate PNNL ðŸŸª
â”‚        â”‚           ðŸŸª package that makes up the climate backbone of GCAM. ðŸŸª
â”‚        â”œâ”€â”€ configuration_files
â”‚        â”œâ”€â”€ consumers
â”‚        â”œâ”€â”€ containers
â”‚        â”œâ”€â”€ demographics
â”‚        â”œâ”€â”€ doxygen
â”‚        â”œâ”€â”€ emissions
â”‚        â”œâ”€â”€ functions
â”‚        â”œâ”€â”€ java
â”‚        â”œâ”€â”€ land_allocator
â”‚        â”œâ”€â”€ main
â”‚        â”œâ”€â”€ marketplace
â”‚        â”œâ”€â”€ parallel
â”‚        â”œâ”€â”€ policy
â”‚        â”œâ”€â”€ reporting
â”‚        â”œâ”€â”€ resources
â”‚        â”œâ”€â”€ sectors
â”‚        â”œâ”€â”€ solution
â”‚        â”œâ”€â”€ target_finder
â”‚        â”œâ”€â”€ technologies
â”‚        â””â”€â”€ util
â”œâ”€â”€ exe ðŸŸ§ This folder contains the files that a user uses to directly run the model at runtime. ðŸŸ§
â”‚    â”‚  ðŸŸ§ (i.e. in the run command) ðŸŸ§
â”‚    â”œâ”€â”€ configuration_policy.xml ðŸŸ© This is an example scenario that shows how to create a configuration ðŸŸ©
â”‚    â”‚                            ðŸŸ© file that includes a policy. ðŸŸ©
â”‚    â”œâ”€â”€ configuration_ref.xml ðŸŸ© This is the base example scenario configuration file. ðŸŸ©
â”‚    â”œâ”€â”€ configuration_ssp.xml ðŸŸ© This is a partial example scenario (it seems incomplete). Avoid using it. ðŸŸ©
â”‚    â”œâ”€â”€ configuration_usa.xml ðŸŸ© This is an example configuration file for a GCAM-USA scenario. ðŸŸ©
â”‚    â”œâ”€â”€ debug_db.xml ðŸŸ© This is the XML dump file of the databasexdb/modelinterface output format. ðŸŸ©
â”‚    â”œâ”€â”€ gcam.exe ðŸŸ© This is the user accessible run point of the model. Run through the command ðŸŸ©
â”‚    â”‚            ðŸŸ© `gcam.exe -C {configuration_file.xml}` ðŸŸ©
â”‚    â”œâ”€â”€ logs ðŸŸª This folder contains partial logs (split among many files) of the debug_db.xml. It is unlikely you ðŸŸª
â”‚    â”‚        ðŸŸª will have to use it much if you know how to process debug_db.xml. ðŸŸª
â”‚    â””â”€â”€ restart
â”œâ”€â”€ input ðŸŸ§ This folder contains all of the CSV (i.e. raw) inputs to the model, R CSV-to-XML conversion files, ðŸŸ§
â”‚    â”‚    ðŸŸ§ and XML files (R generated and otherwise) to include in the configuration. ðŸŸ§
â”‚    â”œâ”€â”€ climate
â”‚    â”œâ”€â”€ extra
â”‚    â”œâ”€â”€ gcamdata ðŸŸ¦ This folder contains all of the CSV input files, R conversion files, and ðŸŸ¦
â”‚    â”‚   â”‚        ðŸŸ¦ XML files generated by the CSV files. ðŸŸ¦
â”‚    â”‚   â”œâ”€â”€ chunk-generator
â”‚    â”‚   â”œâ”€â”€ data
â”‚    â”‚   â”œâ”€â”€ data-raw
â”‚    â”‚   â”œâ”€â”€ DESCRIPTION
â”‚    â”‚   â”œâ”€â”€ exec
â”‚    â”‚   â”œâ”€â”€ figures
â”‚    â”‚   â”œâ”€â”€ gcamdata.Rproj
â”‚    â”‚   â”œâ”€â”€ inst
â”‚    â”‚   â”‚   â”œâ”€â”€ CITATION
â”‚    â”‚   â”‚   â””â”€â”€ extdata ðŸŸ¦ This folder is the root of all CSV files. ðŸŸ¦
â”‚    â”‚   â”‚       â”œâ”€â”€ aglu
â”‚    â”‚   â”‚       â”œâ”€â”€ common
â”‚    â”‚   â”‚       â”œâ”€â”€ emissions
â”‚    â”‚   â”‚       â”œâ”€â”€ energy ðŸŸª This folder contains all of the global DAC related data. The following files are DAC ðŸŸª
â”‚    â”‚   â”‚       â”‚   â”‚      ðŸŸª related files in this folder. ðŸŸª
â”‚    â”‚   â”‚       â”‚   â”œâ”€â”€ A62.calibration.csv ðŸŸ© This file contains the calibration values for the CO2 removal sector ðŸŸ©
â”‚    â”‚   â”‚       â”‚   â”‚                       ðŸŸ© (which includes DAC technologies and "no DAC") in 2015, globally. Due ðŸŸ©
â”‚    â”‚   â”‚       â”‚   â”‚                       ðŸŸ© to the lack of deployment in 2015, all of this goes to "no DAC". ðŸŸ©
â”‚    â”‚   â”‚       â”‚   â”œâ”€â”€ A62.demand.csv ðŸŸ© This file contains the boolean for the type of deployment function for DAC ðŸŸ©
â”‚    â”‚   â”‚       â”‚   â”‚                  ðŸŸ© (per-capita or per-GDP, the default) and price elasticity. ðŸŸ©
â”‚    â”‚   â”‚       â”‚   â”œâ”€â”€ A62.globaltech_co2capture.csv ðŸŸ© This file sets the percent of CO2 capture rates for the ðŸŸ©
â”‚    â”‚   â”‚       â”‚   â”‚                                 ðŸŸ©  different DAC technologies and CCS. ðŸŸ©
â”‚    â”‚   â”‚       â”‚   â”œâ”€â”€ A62.globaltech_coef_ssp1.csv ðŸŸ© This file sets the efficiency rates (EJ/Mt C) at 1971, 2020, ðŸŸ©
â”‚    â”‚   â”‚       â”‚   â”‚                                ðŸŸ© 2050, and 2100 for different electricity sources by DAC source. ðŸŸ©
â”‚    â”‚   â”‚       â”‚   â”‚                                ðŸŸ© This is for SSP1, but SSP's 2-5 are similarly below. ðŸŸ©
â”‚    â”‚   â”‚       â”‚   â”œâ”€â”€ A62.globaltech_coef_ssp2.csv
â”‚    â”‚   â”‚       â”‚   â”œâ”€â”€ A62.globaltech_coef_ssp3.csv
â”‚    â”‚   â”‚       â”‚   â”œâ”€â”€ A62.globaltech_coef_ssp4.csv
â”‚    â”‚   â”‚       â”‚   â”œâ”€â”€ A62.globaltech_coef_ssp5.csv
â”‚    â”‚   â”‚       â”‚   â”œâ”€â”€ A62.globaltech_cost_ssp1.csv ðŸŸ© This file  ðŸŸ©
â”‚    â”‚   â”‚       â”‚   â”œâ”€â”€ A62.globaltech_cost_ssp2.csv
â”‚    â”‚   â”‚       â”‚   â”œâ”€â”€ A62.globaltech_cost_ssp3.csv
â”‚    â”‚   â”‚       â”‚   â”œâ”€â”€ A62.globaltech_cost_ssp4.csv
â”‚    â”‚   â”‚       â”‚   â”œâ”€â”€ A62.globaltech_cost_ssp5.csv
â”‚    â”‚   â”‚       â”‚   â”œâ”€â”€ A62.globaltech_retirement.csv ðŸŸ© ðŸŸ©
â”‚    â”‚   â”‚       â”‚   â”œâ”€â”€ A62.globaltech_shrwt_ssp1.csv ðŸŸ© ðŸŸ©
â”‚    â”‚   â”‚       â”‚   â”œâ”€â”€ A62.globaltech_shrwt_ssp2.csv
â”‚    â”‚   â”‚       â”‚   â”œâ”€â”€ A62.globaltech_shrwt_ssp3.csv
â”‚    â”‚   â”‚       â”‚   â”œâ”€â”€ A62.globaltech_shrwt_ssp4.csv
â”‚    â”‚   â”‚       â”‚   â”œâ”€â”€ A62.globaltech_shrwt_ssp5.csv
â”‚    â”‚   â”‚       â”‚   â”œâ”€â”€ A62.PrimaryFuelCCoef.csv ðŸŸ© ðŸŸ©
â”‚    â”‚   â”‚       â”‚   â”œâ”€â”€ A62.sector.csv ðŸŸ© ðŸŸ©
â”‚    â”‚   â”‚       â”‚   â”œâ”€â”€ A62.subsector_interp.csv ðŸŸ© ðŸŸ©
â”‚    â”‚   â”‚       â”‚   â”œâ”€â”€ A62.subsector_logit.csv ðŸŸ© ðŸŸ©
â”‚    â”‚   â”‚       â”‚   â”œâ”€â”€ A62.subsector_shrwt.csv ðŸŸ© ðŸŸ©
â”‚    â”‚   â”‚       â”‚   â”œâ”€â”€ GIS
â”‚    â”‚   â”‚       â”‚   â””â”€â”€ mappings
â”‚    â”‚   â”‚       â”œâ”€â”€ gcam-usa ðŸŸª ðŸŸª
â”‚    â”‚   â”‚       â”‚   â”œâ”€â”€ emissions
â”‚    â”‚   â”‚       â”‚   â””â”€â”€ GIS
â”‚    â”‚   â”‚       â”‚       â””â”€â”€ README.md
â”‚    â”‚   â”‚       â”œâ”€â”€ mi_headers
â”‚    â”‚   â”‚       â”œâ”€â”€ ModelInterface
â”‚    â”‚   â”‚       â”œâ”€â”€ socioeconomics
â”‚    â”‚   â”‚       â”œâ”€â”€ tests
â”‚    â”‚   â”‚       â””â”€â”€ water
â”‚    â”‚   â”œâ”€â”€ LICENSE
â”‚    â”‚   â”œâ”€â”€ man
â”‚    â”‚   â”œâ”€â”€ NAMESPACE
â”‚    â”‚   â”œâ”€â”€ R ðŸŸ¦ ðŸŸ¦
â”‚    â”‚   â”‚   â”œâ”€â”€ zchunk_batch_dac_USA_xml.R ðŸŸ© ðŸŸ©
â”‚    â”‚   â”‚   â”œâ”€â”€ zchunk_batch_dac_xml.R ðŸŸ© ðŸŸ©
â”‚    â”‚   â”‚   â”œâ”€â”€ zchunk_L262.dac.R ðŸŸ© ðŸŸ©
â”‚    â”‚   â”‚   â”œâ”€â”€ zchunk_L262.dac_USA.R ðŸŸ© ðŸŸ©
â”‚    â”‚   â”‚   â””â”€â”€ zchunk_LA162.dac.R ðŸŸ© ðŸŸ©
â”‚    â”‚   â”œâ”€â”€ README.md
â”‚    â”‚   â”œâ”€â”€ renv
â”‚    â”‚   â”œâ”€â”€ renv.lock
â”‚    â”‚   â”œâ”€â”€ solution
â”‚    â”‚   â”‚   â””â”€â”€ cal_broyden_config.xml ðŸŸ© ðŸŸ©
â”‚    â”‚   â”œâ”€â”€ tests
â”‚    â”‚   â”œâ”€â”€ vignettes
â”‚    â”‚   â”‚   â”œâ”€â”€ driverdrake_vignette.Rmd ðŸŸ© ðŸŸ©
â”‚    â”‚   â”‚   â””â”€â”€ usermod_vignette.Rmd ðŸŸ© ðŸŸ©
â”‚    â”‚   â””â”€â”€ xml ðŸŸ¦ ðŸŸ¦
â”‚    â”‚   â”‚   â”œâ”€â”€ dac_ssp1.xml ðŸŸ© ðŸŸ©
â”‚    â”‚   â”‚   â”œâ”€â”€ dac_ssp2.xml
â”‚    â”‚   â”‚   â”œâ”€â”€ dac_ssp3.xml
â”‚    â”‚   â”‚   â”œâ”€â”€ dac_ssp4.xml
â”‚    â”‚   â”‚   â”œâ”€â”€ dac_ssp5.xml
â”‚    â”‚   â”‚   â”œâ”€â”€ dac_USA_ssp1.xml ðŸŸ© ðŸŸ©
â”‚    â”‚   â”‚   â”œâ”€â”€ dac_USA_ssp2.xml
â”‚    â”‚   â”‚   â”œâ”€â”€ dac_USA_ssp3.xml
â”‚    â”‚   â”‚   â”œâ”€â”€ dac_USA_ssp4.xml
â”‚    â”‚   â”‚   â””â”€â”€ dac_USA_ssp5.xml
â”‚    â”œâ”€â”€ magicc
â”‚    â”œâ”€â”€ policy ðŸŸ¦ ðŸŸ¦
â”‚    â”‚   â”œâ”€â”€ 2025_target_finder_phasein.xml ðŸŸ© ðŸŸ©
â”‚    â”‚   â”œâ”€â”€ 2025_target_finder.xml ðŸŸ© ðŸŸ©
â”‚    â”‚   â”œâ”€â”€ carbon_tax_0_nearterm.xml ðŸŸ© ðŸŸ©
â”‚    â”‚   â”œâ”€â”€ carbon_tax_15_5.xml ðŸŸ© ðŸŸ©
â”‚    â”‚   â”œâ”€â”€ forcing_target_4p5.xml ðŸŸ© ðŸŸ©
â”‚    â”‚   â”œâ”€â”€ ghg_link_global.xml ðŸŸ© ðŸŸ©
â”‚    â”‚   â”œâ”€â”€ spa14_tax.xml ðŸŸ© ðŸŸ©
â”‚    â”‚   â”œâ”€â”€ states_policy_global.xml ðŸŸ© ðŸŸ©
â”‚    â”‚   â”œâ”€â”€ states_policy_USA.xml ðŸŸ© ðŸŸ©
â”‚    â”‚   â””â”€â”€ input-module
â”‚    â””â”€â”€ solution
â”œâ”€â”€ LICENSE.md
â”œâ”€â”€ Makefile ðŸŸ© ðŸŸ©
â”œâ”€â”€ output ðŸŸ§ ðŸŸ§
â”‚    â”œâ”€â”€ database_basexdb
â”‚    â”œâ”€â”€ gcam_diagnostics
â”‚    â”‚   â”œâ”€â”€ batch_queries
â”‚    â”‚   â”œâ”€â”€ gcam_data
â”‚    â”‚   â”œâ”€â”€ logs
â”‚    â”‚   â”œâ”€â”€ mappings
â”‚    â”‚   â”œâ”€â”€ post_process
â”‚    â”‚   â”œâ”€â”€ readme.md
â”‚    â”‚   â””â”€â”€ scripts
â”‚    â”œâ”€â”€ modelinterface
â”‚    â””â”€â”€ queries
â”œâ”€â”€ README.md
â””â”€â”€ util
    â””â”€â”€ testing-framework
```

Emoji's for adding color to documentation: ðŸŸ¥ðŸŸ¨

## What is a GCAM Scenario?

### Components
 - [Configuration file](#configuration-files)
 - [Policy files](#policy-files)
 - [DAC files](#dac-files)

### Configuration Files
`policy-target-file`: This tag in the configuration file specifies what the main policy for the scenario will be. 

### Policy Files

### DAC Files

## Debugging Tips
 - You will likely need to reference the [documentation](http://jgcri.github.io/gcam-doc/) frequently. Utilize the search function on [gcam-doc](https://github.com/JGCRI/gcam-doc/) if you are trying to find something.
 - Be careful editing the `CSV` files. Things can get out of hand quickly due to the cross references between them.